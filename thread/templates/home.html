<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social App</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/home.css' %}">
</head>

<body>
    <h1 class="hello">Hello Social App</h1>

    <div style="color: red;">
        {% if messages %}
        {% for message in messages %}
        {{ message }}
        {% endfor%}
        {% endif %}
    </div>
    {% if user.is_authenticated %}
    <div>
        <!-- HTML -->
        <div class="dropdown">
            <button class="dropbtn">Choose a topic</button>
            <div class="dropdown-content">
                <div id="html">
                    HTML is the standard markup language for creating web pages.
                </div>
                <div id="css">
                    CSS is the language that describes the style of an HTML document.
                </div>
                <div id="js">
                    JavaScript is the programming language that makes web pages dynamic and interactive.
                </div>
            </div>
        </div>

        <!-- CSS -->
        <style>
            .dropdown {
                position: relative;
                display: inline-block;
            }

            .dropbtn {
                background-color: #4CAF50;
                color: white;
                padding: 16px;
                font-size: 16px;
                border: none;
                cursor: pointer;
            }

            .dropdown-content {
                display: none;
                position: absolute;
                background-color: #f1f1f1;
                min-width: 160px;
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
            }

            .dropdown-content div {
                color: black;
                padding: 12px 16px;
                text-decoration: none;
                display: block;
                cursor: pointer;
            }

            .dropdown-content div:hover {
                background-color: #ddd;
            }

            .show {
                display: block;
            }
        </style>

        <!-- JavaScript -->
        <script>
            // Get the button and the dropdown content
            var btn = document.getElementsByClassName("dropbtn")[0];
            var content = document.getElementsByClassName("dropdown-content")[0];

            // Add a click event listener to the button
            btn.addEventListener("click", function() {
                // Toggle the "show" class on the content
                content.classList.toggle("show");
            });

            // Add a click event listener to each option in the content
            var options = content.getElementsByTagName("div");
            for (var i = 0; i < options.length; i++) {
                options[i].addEventListener("click", function() {
                    // Hide the content
                    content.classList.remove("show");
                    // Show an alert with the option text
                    alert(this.innerHTML);
                });
            }
        </script>

        <div>
            <p>
                <h2>Welcome to our Home page</h2>
            </p>
            <hr>
            <div>
                <p>
                    <h3>Posts</h3>
                </p>
                {% if all_post %}
                {% for post in all_post reversed %}
                <div>
                    <p>
                        Image: {% if post.image %}
                        <img src="{{ post.image.url }}" alt="Post Image" width="100" height="100">
                        {% endif %}
                    </p>
                    <p>
                        Author: <a href="{% url 'profile' post.author %}">@{{ post.author }}</a>
                    </p>
                    <p>
                        Title: {{ post.title }}
                    </p>
                    <p>
                        {{ post.content}}
                    </p>
                    <p>
                        Posted at: {{ post.created_at}}
                    </p>
                    <p>
                        <a href="{% url 'like_post' %}?postID={{ post.postID }}">
                            <button class="like-button">
                                <i class="fas fa-thumbs-up"></i> Like
                            </button>
                        </a> &nbsp;&nbsp; {{post.num_of_likes }} Likes. &nbsp;&nbsp; Liked_by
                        {% for u in unique_likes reversed %}
                        {% if post.postID == u.postID %}
			<a href="{% url 'profile' u.username %}">@{{ u.username}}</a>, &nbsp;
			{% endif %}
                        {% endfor %}
                    </p>

                    <hr style="color: aqua;">
                </div>
                {% endfor %}
                {% endif %}
            </div>
        </div>
        <p>
            <a href="{% url 'create_post' %}">Create new Post</a>
        </p>
        <p>
            <a href="{% url 'logout_user' %}">Log out</a>
        </p>
        <p>
            <a href="{% url 'details' %}">profile</a>
        </p>
        <p>
            <a href="{% url 'account_setting' %}">Settings</a><br>
        </p>
        <hr>
    </div>
    {% else %}
    <a href="{% url 'login_user' %}">Login</a>
    <br><a href="{% url 'sign_up' %}">Sign Up</a>
    {% endif %}
</body>

</html>
