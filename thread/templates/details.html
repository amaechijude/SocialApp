{% extends 'base.html' %}
{% block content %}
{% load static %}
{% block title %} {{ user.username }} {% endblock %}
<hr style="color: aqua;">
<style>
    #footer {
        bottom: 0;
        width: 100%;
    }
    .profile-cover {
        height: 300px;
        background-color: #007bff;
        color: #fff;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .profile-avatar {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        border: 5px solid #fff;
        margin-bottom: -75px;
    }

    .profile-info {
        text-align: center;
        margin-top: 30px;
    }

    .profile-info h1 {
        font-size: 32px;
        margin-bottom: 10px;
    }

    .profile-info p {
        font-size: 18px;
        color: #6c757d;
    }

    .profile-tabs {
        margin-top: 30px;
    }

    .nav-tabs .nav-link {
        color: #495057;
    }

    .nav-tabs .nav-link.active {
        color: #007bff;
        border-bottom-color: #007bff;
    }
</style>

<!-- Profile Cover -->
<div class="profile-cover">
    <!-- Profile Avatar -->
    <img src="{{ profile.profile_pics.url }}" alt="Avatar" class="profile-avatar">
</div>

<div class="container">
    <!-- Profile Information -->
    <div class="profile-info">
        <h1>@{{ profile.user.username }}</h1>
        <p>
            {{ post_len }}&nbsp;Posts
        </p>
        <p>
            {{ profile.user.email }}
        </p>
        <p>
            {{ profile.first_name }} &nbsp;{{ profile.last_name }}
        </p>
        <p>
            {{ profile.location_city }}
        </p>
        <blockquote>
            {{ profile.bio }}
        </blockquote>
        <p>
            <form action="{% url 'follow' %}" method="POST">
                {% csrf_token %}
                <input name="user" type="hidden" value="{{ user_profile.user.username }}">
                {% if request.user.profile == profile %}
                <input type="submit" value="Update Profile">
                {% else %}
                <input type="submit" value="{{ follow_check }}">
                {% endif %}
            </form>
        </p>
    </div>

    <!-- Profile Tabs -->
    <ul class="nav nav-tabs profile-tabs">
        <li class="nav-item">
            <a class="nav-link active" href="#photos" data-bs-toggle="tab">Photos</a>
        </li>
	{% if fans %}
        <li class="nav-item">
            <a class="nav-link" href="#friends" data-bs-toggle="tab">
		    {% if fans_count > 1 %}
		    {{ fans_count }} Followers
		    {% else %}
		    {{ fans_count }} Follower
		    {% endif %}
	    </a>
        </li>
	{% endif %}
	<li class="nav-item">
                <a class="nav-link" href="#posts" data-bs-toggle="tab">
			{% if followings_count > 1 %}
			{{ followings_count }} Followings
			{% else %}
			{{ followings_count }} Following
			{% endif %}
		</a>
        </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content">
        <div class="tab-pane fade show active" id="photos">
            <h3>Photos</h3>
            {% for post in posts reversed %}
            {% if post.image %}
            <a href="{% url 'post_view' post.postID %}">
                <img src="{{ post.image.url }}" width="150">
            </a> <br />
            <!-- Display user's photos here -->
            {% endif %}
            {% endfor %}
        </div>

        <div class="tab-pane fade" id="friends">
            <h3>Followers</h3>
            <!-- Display user's friends here -->
	    {% for fn in fans %}
	    <p>
                <a href="{% url 'profile' fn.follower %}">@{{ fn.follower }}</a>
	    </p>
	    {% endfor %}
        </div>
	<div class="tab-pane fade" id="posts">
                <h3>Followings</h3>
		{% for f in followings %}
		<p>
		<a href="{% url 'profile' f.user %}">@{{ f.user }}</a>
		</p>
		{% endfor %}
        </div>
    </div>
</div>

{% endblock %}